---
phase: 12-code-reduction
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - optimizer/src/transform/generator.rs
  - optimizer/src/transform/jsx/element.rs
  - optimizer/src/transform/jsx/attribute.rs
  - optimizer/src/transform/jsx/child.rs
  - optimizer/src/transform/jsx/fragment.rs
  - optimizer/src/transform/qrl.rs
  - optimizer/src/transform/scope.rs
autonomous: true

must_haves:
  truths:
    - "No DEBUG constant exists in the codebase"
    - "No println! statements exist in transform modules"
    - "All verbose None::<OxcBox<TSTypeParameterInstantiation>> replaced with NONE"
    - "All 239 tests still pass"
  artifacts:
    - path: "optimizer/src/transform/generator.rs"
      provides: "Core transformer without debug code"
      contains: "use oxc_ast::{.*NONE"
  key_links:
    - from: "generator.rs"
      to: "NONE constant"
      via: "import from oxc_ast"
      pattern: "use oxc_ast::.*NONE"
---

<objective>
Remove all debug code and adopt OXC NONE API across transform modules.

Purpose: Reduce code volume by ~140 lines through debug removal and API adoption.
Output: Cleaner production code with no debug output, using OXC conveniences.
</objective>

<execution_context>
@/Users/jackshelton/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jackshelton/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-code-reduction/12-RESEARCH.md
@optimizer/src/transform/generator.rs
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove DEBUG constant and all debug output</name>
  <files>
    optimizer/src/transform/generator.rs
    optimizer/src/transform/jsx/element.rs
    optimizer/src/transform/jsx/attribute.rs
    optimizer/src/transform/jsx/child.rs
  </files>
  <action>
Remove all debug-related code from transform modules:

1. In generator.rs:
   - Remove `const DEBUG: bool = true;` line
   - Remove `const DUMP_FINAL_AST: bool = false;` if present
   - Remove all `if DEBUG { ... }` blocks entirely (not just the condition)
   - Remove all standalone `println!("...")` statements including:
     - `println!("ENTERING PROGRAM ...")`
     - `println!("EXITING PROGRAM ...")`
     - `println!("push segment: ...")`
     - `println!("pop segment: ...")`
     - `println!("Replacing expression...")`
     - `println!("Skip transform...")`
     - `println!("Registered prop...")`
     - `println!("Exited .map()...")`
   - Remove the DUMP_FINAL_AST conditional block entirely

2. In jsx/element.rs:
   - Remove `println!("push segment: ...")` statement

3. In jsx/attribute.rs:
   - Remove `println!("Replacing JSX attribute...")` statements

4. In jsx/child.rs:
   - Remove `println!("Replacing JSX child...")` statements

Do NOT remove:
- Any actual functionality
- Error handling that uses eprintln!
- Logging that might be used in production
  </action>
  <verify>
Run: `grep -r "println!" optimizer/src/transform/ | grep -v "eprintln" | wc -l`
Should return 0 (no println! statements remain).
Run: `grep -r "const DEBUG" optimizer/src/transform/`
Should return nothing.
  </verify>
  <done>No DEBUG constant, no println! statements in transform modules.</done>
</task>

<task type="auto">
  <name>Task 2: Replace verbose None type annotations with NONE</name>
  <files>
    optimizer/src/transform/generator.rs
    optimizer/src/transform/jsx/element.rs
    optimizer/src/transform/jsx/attribute.rs
    optimizer/src/transform/jsx/fragment.rs
    optimizer/src/transform/qrl.rs
    optimizer/src/transform/scope.rs
  </files>
  <action>
Replace all verbose `None::<OxcBox<TSTypeParameterInstantiation<'a>>>` with `NONE`:

1. Ensure NONE is imported: `use oxc_ast::NONE;` (already in generator.rs line 19)

2. Search for and replace all occurrences:
   - Pattern: `None::<OxcBox<TSTypeParameterInstantiation<'a>>>`
   - Replace with: `NONE`

   Common locations:
   - `builder.expression_call(span, callee, None::<...>, args, false)` -> `builder.expression_call(span, callee, NONE, args, false)`
   - Any other call sites using `None::<OxcBox<TSTypeParameterInstantiation<'_>>>`

3. Also replace `None::<OxcBox<TSTypeParameterDeclaration<'a>>>` with `NONE` if found.

4. Check jsx/ modules for NONE import - add if needed in module files that use it.

Verification: Each replacement should make the line shorter while maintaining identical functionality (NONE is just a type-inferred None for generic AST positions).
  </action>
  <verify>
Run: `grep -r "None::<OxcBox<TSType" optimizer/src/transform/`
Should return nothing (all replaced with NONE).
Run: `cargo test --package qwik-optimizer` - all 239 tests pass.
  </verify>
  <done>All verbose None type annotations replaced with NONE constant, tests pass.</done>
</task>

</tasks>

<verification>
1. `grep -r "DEBUG\|println!" optimizer/src/transform/ | grep -v eprintln` returns empty
2. `grep -r "None::<OxcBox<TSType" optimizer/src/transform/` returns empty
3. `cargo test --package qwik-optimizer` passes all 239 tests
4. Code compiles without warnings
</verification>

<success_criteria>
- Zero println! statements in transform modules
- Zero DEBUG constant references
- All None::<OxcBox<TSType...>> replaced with NONE
- All 239 tests pass
- ~140 lines reduced from transform modules
</success_criteria>

<output>
After completion, create `.planning/phases/12-code-reduction/12-01-SUMMARY.md`
</output>
