---
phase: 12-code-reduction
plan: 03
type: execute
wave: 3
depends_on: ["12-02"]
files_modified:
  - optimizer/src/transform/jsx/mod.rs
  - optimizer/src/transform/jsx/element.rs
  - optimizer/src/transform/jsx/attribute.rs
  - optimizer/src/transform/jsx/child.rs
  - optimizer/src/transform/jsx/fragment.rs
  - optimizer/src/transform/jsx/bind.rs
  - optimizer/src/transform/jsx/event.rs
autonomous: true

must_haves:
  truths:
    - "No inline comments (//) remain in jsx/ modules"
    - "Public API doc comments preserved"
    - "All 239 tests pass after complete cleanup"
    - "Total line reduction >= 600 lines from original 3701"
  artifacts:
    - path: "optimizer/src/transform/jsx/element.rs"
      provides: "JSX element handler without comments"
    - path: "optimizer/src/transform/jsx/attribute.rs"
      provides: "JSX attribute handler without comments"
  key_links: []
---

<objective>
Remove all inline comments from JSX modules and verify final code reduction.

Purpose: Complete the comment cleanup for ~150 more lines, verify all 239 tests pass.
Output: Fully cleaned transform codebase with verified test suite.
</objective>

<execution_context>
@/Users/jackshelton/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jackshelton/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-code-reduction/12-RESEARCH.md
@.planning/phases/12-code-reduction/12-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove comments from all jsx/ modules</name>
  <files>
    optimizer/src/transform/jsx/mod.rs
    optimizer/src/transform/jsx/element.rs
    optimizer/src/transform/jsx/attribute.rs
    optimizer/src/transform/jsx/child.rs
    optimizer/src/transform/jsx/fragment.rs
    optimizer/src/transform/jsx/bind.rs
    optimizer/src/transform/jsx/event.rs
  </files>
  <action>
Remove all inline comments from JSX modules:

1. jsx/mod.rs (~10 lines):
   - Remove module doc comment if redundant
   - Remove any inline comments

2. jsx/element.rs (~30 lines):
   - Remove function doc comments on internal helpers
   - Remove all `//` inline comments
   - KEEP: `///` on pub functions

3. jsx/attribute.rs (~60 lines):
   - This is the largest JSX module (555 lines)
   - Remove all inline `//` comments explaining logic
   - Remove section header comments
   - KEEP: `///` on pub functions

4. jsx/child.rs (~15 lines):
   - Remove inline comments
   - KEEP: pub function docs

5. jsx/fragment.rs (~20 lines):
   - Remove inline comments
   - KEEP: pub function docs

6. jsx/bind.rs (~10 lines):
   - Remove inline comments

7. jsx/event.rs (~25 lines):
   - Remove inline comments
   - Remove example comments if not in doc format
   - KEEP: `///` doc comments with examples if they're on pub items

Do NOT remove:
- `///` doc comments on public API
- Comments that are actually documentation examples in doc format
  </action>
  <verify>
Count remaining comments per file:
`for f in optimizer/src/transform/jsx/*.rs; do echo "$f:"; grep -c "^[[:space:]]*//[^/!]" "$f" 2>/dev/null || echo 0; done`
Each file should have minimal remaining inline comments.
Run: `cargo check --package qwik-optimizer` - compiles.
  </verify>
  <done>All JSX modules have inline comments removed.</done>
</task>

<task type="auto">
  <name>Task 2: Final verification and line count</name>
  <files>
    (none - verification only)
  </files>
  <action>
Verify the complete code reduction:

1. Run full test suite:
   `cargo test --package qwik-optimizer`
   All 239 tests must pass.

2. Count final lines:
   `wc -l optimizer/src/transform/*.rs optimizer/src/transform/jsx/*.rs`
   Compare to original 3701 lines.

3. Calculate reduction:
   - Original: 3701 lines
   - Target: ~3060 lines (17% reduction)
   - Acceptable: >= 600 lines reduced

4. Verify no debug code remains:
   `grep -r "DEBUG\|println!" optimizer/src/transform/`
   Should be empty.

5. Verify no verbose None types remain:
   `grep -r "None::<OxcBox<TSType" optimizer/src/transform/`
   Should be empty.

6. Verify docs generate cleanly:
   `cargo doc --package qwik-optimizer --no-deps`
   Should complete without warnings about missing documentation on public items.
  </action>
  <verify>
`cargo test --package qwik-optimizer` - 239 tests pass
`wc -l optimizer/src/transform/*.rs optimizer/src/transform/jsx/*.rs | tail -1` - shows reduced line count
  </verify>
  <done>All 239 tests pass, line reduction verified (>= 600 lines removed from 3701).</done>
</task>

</tasks>

<verification>
1. All 239 tests pass
2. Line count reduced by >= 600 lines (from 3701)
3. No DEBUG, println!, or verbose None types remain
4. Documentation generates cleanly
5. Code compiles without warnings
</verification>

<success_criteria>
- All JSX module inline comments removed
- All 239 tests pass
- Total line reduction >= 600 lines (17% from 3701)
- Requirements RED-01 through RED-05 satisfied:
  - RED-01: OXC NONE API adopted
  - RED-02: Early returns added where applicable (via cleaner code)
  - RED-03: SWC parity comments removed
  - RED-04: All comments removed
  - RED-05: 239 tests still pass
</success_criteria>

<output>
After completion, create `.planning/phases/12-code-reduction/12-03-SUMMARY.md`
</output>
