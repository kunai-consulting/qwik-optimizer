---
source: optimizer/src/spec_parity_tests.rs
expression: output
---
==INPUT==

import { component$, useClientMount$, useStore, useTask$ } from '@qwik.dev/core';
import mongo from 'mongodb';
import redis from 'redis';
import threejs from 'threejs';
import { a } from './keep';
import { b } from '../keep2';
import { c } from '../../remove';

export const Parent = component$(() => {
	const state = useStore({
		text: ''
	});

	// Double count watch
	useClientMount$(async () => {
		state.text = await mongo.users();
		redis.set(state.text, a, b, c);
	});

	useTask$(() => {
		// Code
	});

	return (
		<div
			shouldRemove$={() => state.text}
			onClick$={() => console.log('parent', state, threejs)}
		>
			<Div
				onClick$={() => console.log('keep')}
				render$={() => state.text}
			/>
			{state.text}
		</div>
	);
});

============================= components/component.tsx ==

import { componentQrl, qrl } from "@qwik.dev/core";
const i_Yn2kIDABoYw = ()=>import("./component.tsx_Parent_component_useClientMount_Yn2kIDABoYw");
const i_ngmvcygWux8 = ()=>import("./component.tsx_Parent_component_useTask_ngmvcygWux8");
const i_t6Wy3C0Q0XM = ()=>import("./component.tsx_Parent_component_t6Wy3C0Q0XM");
export const Parent = /*#__PURE__*/ componentQrl(/*#__PURE__*/ qrl(i_t6Wy3C0Q0XM, "Parent_component_t6Wy3C0Q0XM"));


None
============================= components/component.tsx_Parent_component_useTask_ngmvcygWux8.tsx (ENTRY POINT)==

export const Parent_component_useTask_ngmvcygWux8 = ()=>{};


None
/*
{
  "origin": "components/component.tsx",
  "name": "Parent_component_useTask_ngmvcygWux8",
  "entry": "entry_segments",
  "displayName": "component.tsx_Parent_component_useTask",
  "hash": "ngmvcygWux8",
  "canonicalFilename": "component.tsx_Parent_component_useTask_ngmvcygWux8",
  "path": "components",
  "extension": "tsx",
  "parent": "component",
  "ctxKind": "function",
  "ctxName": "useTask$",
  "captures": false,
  "loc": [
    486,
    506
  ]
}
*/
============================= components/component.tsx_Parent_component_t6Wy3C0Q0XM.tsx (ENTRY POINT)==

import { _jsxSorted, qrl } from "@qwik.dev/core";
const i_render = ()=>import("./component.tsx");
const i_onClick = ()=>import("./component.tsx");
const i_Yn2kIDABoYw = ()=>import("./component.tsx_Parent_component_useClientMount_Yn2kIDABoYw");
const i_ngmvcygWux8 = ()=>import("./component.tsx_Parent_component_useTask_ngmvcygWux8");
export const Parent_component_t6Wy3C0Q0XM = ()=>{
	const state = useStore({ text: "" });
	/*#__PURE__*/ useClientMountQrl(/*#__PURE__*/ qrl(i_Yn2kIDABoYw, "Parent_component_useClientMount_Yn2kIDABoYw", [state]));
	/*#__PURE__*/ useTaskQrl(/*#__PURE__*/ qrl(i_ngmvcygWux8, "Parent_component_useTask_ngmvcygWux8"));
	return /*#__PURE__*/ _jsxSorted("div", {
		shouldRemove$: /*#__PURE__*/ useTaskQrl(/*#__PURE__*/ qrl(i_ngmvcygWux8, "Parent_component_useTask_ngmvcygWux8")),
		on:click: /*#__PURE__*/ useClientMountQrl(/*#__PURE__*/ qrl(i_Yn2kIDABoYw, "Parent_component_useClientMount_Yn2kIDABoYw", [state]))
	}, null, [_jsxSorted(Div, {
		onClick$: /*#__PURE__*/ qrl(i_onClick, "Parent_component_div_Div_onClick"),
		render$: /*#__PURE__*/ qrl(i_render, "Parent_component_div_Div_render", [state])
	}, null, null, 3, null), state.text], 1, null);
};


None
/*
{
  "origin": "components/component.tsx",
  "name": "Parent_component_t6Wy3C0Q0XM",
  "entry": "entry_segments",
  "displayName": "component.tsx_Parent_component",
  "hash": "t6Wy3C0Q0XM",
  "canonicalFilename": "component.tsx_Parent_component_t6Wy3C0Q0XM",
  "path": "components",
  "extension": "tsx",
  "parent": null,
  "ctxKind": "function",
  "ctxName": "component$",
  "captures": false,
  "loc": [
    295,
    741
  ]
}
*/
============================= components/component.tsx_Parent_component_useClientMount_Yn2kIDABoYw.tsx (ENTRY POINT)==

import { c } from "../../remove";
import { b } from "../keep2";
import { a } from "./keep";
import mongo from "mongodb";
import redis from "redis";
export const Parent_component_useClientMount_Yn2kIDABoYw = async ()=>{
	const [state] = useLexicalScope();
	state.text = await mongo.users();
	redis.set(state.text, a, b, c);
};


None
/*
{
  "origin": "components/component.tsx",
  "name": "Parent_component_useClientMount_Yn2kIDABoYw",
  "entry": "entry_segments",
  "displayName": "component.tsx_Parent_component_useClientMount",
  "hash": "Yn2kIDABoYw",
  "canonicalFilename": "component.tsx_Parent_component_useClientMount_Yn2kIDABoYw",
  "path": "components",
  "extension": "tsx",
  "parent": "component",
  "ctxKind": "function",
  "ctxName": "useClientMount$",
  "captures": true,
  "loc": [
    386,
    472
  ]
}
*/
== DIAGNOSTICS ==

[]
